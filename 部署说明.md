# 🔌 电力知识库与AI预测平台 - 部署说明

## 项目整合说明

本项目成功整合了以下两个系统：

### 1. 原有系统
- **电力知识库与在线学习平台**：基于Django + React的教育平台
- **电力负荷AI预测系统**：基于Gradio的机器学习预测系统

### 2. 整合后的统一平台
- **统一后端**：Django框架，集成了原有的课程管理和新增的AI预测功能
- **统一前端**：React应用，包含学习平台和AI预测界面
- **独立AI系统**：保留原有的Gradio应用作为备选方案

## 🏗️ 项目结构

```
电力知识库与AI预测平台/
├── README.md                    # 项目说明文档
├── requirements.txt             # 统一Python依赖
├── start.ps1                   # Windows启动脚本
├── start.sh                    # Linux/Mac启动脚本
├── 部署说明.md                  # 本文档
├── backend/                    # Django后端
│   ├── manage.py              # Django管理脚本
│   ├── requirements.txt       # 后端依赖
│   ├── db.sqlite3            # SQLite数据库
│   ├── edu/                  # Django项目配置
│   ├── apps/                 # 应用模块
│   │   ├── course/          # 课程管理
│   │   ├── user/            # 用户管理
│   │   └── prediction/      # AI预测模块（新增）
│   ├── static/              # 静态文件
│   └── ai_prediction/       # AI预测核心代码
├── frontend/                 # React前端
│   ├── package.json         # 前端依赖
│   ├── src/
│   │   ├── pages/
│   │   │   └── prediction/  # AI预测页面（新增）
│   │   └── router/          # 路由配置
├── standalone_ai/           # 独立AI预测系统（Gradio）
│   ├── app.py              # Gradio应用
│   └── src/                # AI核心代码
└── docs/                   # 项目文档
```

## 🚀 快速部署

### 方法一：使用启动脚本（推荐）

**Windows用户：**
```powershell
# 以管理员身份运行PowerShell
Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser
.\start.ps1
```

**Linux/Mac用户：**
```bash
chmod +x start.sh
./start.sh
```

### 方法二：手动启动

#### 1. 环境准备
```bash
# 安装Python依赖
pip install -r requirements.txt

# 安装前端依赖
cd frontend
npm install
cd ..
```

#### 2. 启动后端
```bash
cd backend
python manage.py migrate          # 初始化数据库
python manage.py createsuperuser  # 创建管理员账户（可选）
python manage.py runserver        # 启动后端服务
```

#### 3. 启动前端
```bash
cd frontend
npm run dev                       # 启动前端开发服务器
```

#### 4. 启动独立AI系统（可选）
```bash
cd standalone_ai
python app.py                     # 启动Gradio界面
```

## 🌐 访问地址

- **主平台**: http://localhost:5173 (React前端)
- **后端API**: http://localhost:8000 (Django后端)
- **管理后台**: http://localhost:8000/admin
- **独立AI系统**: http://localhost:7860 (Gradio界面)

## 🎯 主要功能

### 教育平台功能（原有）
- ✅ 用户注册与登录
- ✅ 课程管理与学习
- ✅ 知识库检索
- ✅ 在线考试与测评

### AI预测功能（新增）
- ✅ 电力负荷单点预测
- ✅ 批量时间段预测
- ✅ 多模型性能对比
- ✅ 可视化图表展示
- ✅ 预测历史记录
- ✅ 独立Gradio系统

## 🔧 技术栈

**后端技术**
- Django 4.2.7
- Django Ninja (API框架)
- SQLite数据库
- scikit-learn, XGBoost (机器学习)
- pandas, numpy (数据处理)
- matplotlib, seaborn (可视化)

**前端技术**
- React 18
- Ant Design 5.x
- Vite构建工具
- Axios (HTTP客户端)
- Recharts (图表库)
- React Router (路由)

**AI预测技术**
- Gradio (Web界面)
- 多种机器学习算法
- 时间序列预测
- 数据可视化

## 📊 数据库结构

### 新增的AI预测相关表
- `prediction_model`: 预测模型管理
- `prediction_history`: 预测历史记录
- `model_performance`: 模型性能指标

## 🔐 默认账户

- **管理员账户**: admin / 123456
- **用户可自行注册**

## 🛠️ 开发说明

### 添加新的AI模型
1. 在 `backend/ai_prediction/model_manager.py` 中添加模型
2. 在 `frontend/src/pages/prediction/index.jsx` 中更新模型选项

### 修改前端样式
- 主要样式文件: `frontend/src/pages/prediction/index.css`
- 全局样式: `frontend/src/index.css`

### 扩展API功能
- 后端API: `backend/apps/prediction/views.py`
- URL配置: `backend/apps/prediction/urls.py`

## 🐛 常见问题

### 1. Python依赖安装失败
```bash
# 升级pip
pip install --upgrade pip

# 使用国内镜像
pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple/
```

### 2. Node.js依赖安装失败
```bash
# 使用淘宝镜像
npm install --registry https://registry.npmmirror.com

# 或使用yarn
yarn install
```

### 3. 数据库迁移失败
```bash
# 删除迁移文件和数据库，重新开始
rm backend/db.sqlite3
rm -rf backend/apps/*/migrations/
python backend/manage.py makemigrations
python backend/manage.py migrate
```

### 4. AI预测功能报错
- 确保已安装所有机器学习相关依赖
- 检查 `backend/ai_prediction/` 目录下的文件是否完整
- 查看控制台错误信息

## 📝 项目文档

项目相关文档位于 `docs/` 目录：
- 项目立项文档
- 需求分析报告
- 系统设计文档
- 测试用例
- 答辩材料

## 🎉 部署完成

恭喜！您已成功整合并部署了电力知识库与AI预测平台。该平台结合了教育学习和智能预测两大功能，为电力行业提供了完整的知识管理和AI应用解决方案。

如有问题，请查看日志文件或联系开发团队。
